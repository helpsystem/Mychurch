# ๐ ฺฏุฒุงุฑุด ุฌุงูุน ุงูฺฉุงูุงุช ฺฉุชุงุจ ููุฏุณ ุฏุฑ ุณุงุช

## โ ุงูฺฉุงูุงุช ููุฌูุฏ (ุขูฺู ุงูุงู ูุฌูุฏ ุฏุงุฑุฏ)

### 1. **ุณุงุฎุชุงุฑ ฺฉุชุงุจ ููุฏุณ**
- โ ุฏุงุฑุง ุนูุฏ ุนุชู (Old Testament) ู ุนูุฏ ุฌุฏุฏ (New Testament)
- โ 66 ฺฉุชุงุจ (39 ุนูุฏ ุนุชู + 27 ุนูุฏ ุฌุฏุฏ)
- โ ููู ูุตูโูุง ู ุขุงุช ููุฌูุฏ ุงุณุช
- โ ุฏูุฒุจุงูู (ูุงุฑุณ ู ุงูฺฏูุณ) ุฏุฑ ุฏุชุงุจุณ

### 2. **ุญุงูุชโูุง ููุงุด**
ุณุงุช ุฏุงุฑุง 3 ุญุงูุช ููุงุด ุงุณุช:

#### **A. Modern View (ููุง ุงุณุชุงูุฏุงุฑุฏ)**
- ููุงุด ุนููุฏ ุขุงุช
- ูุงุจูุช highlight ุขุงุช
- ูุงุจูุช ุงุฏุฏุงุดุชโุจุฑุฏุงุฑ
- ูุงุจูุช bookmark

#### **B. FlipBook 3D View (ููุง ฺฉุชุงุจ)**
- โ ุงูฺฉุช ูุฑู ุฒุฏู 3D
- โ ุฏูุฒุจุงูู (ูุงุฑุณ + ุงูฺฏูุณ) ุฏุฑ ฺฉูุงุฑ ูู
- โ ุงูุฏุงุฒู ุจุฒุฑฺฏ (1100ร750px)
- โ ูููุชโูุง ุจุฒุฑฺฏ ู ุฎูุงูุง (1.35-1.45rem)
- โ ุดูุงุฑู ุขุงุช ุจุฒุฑฺฏ ุจุง gradient
- โ navigation ุจุง ุตูุญู ฺฉูุฏ
- โ ุฏฺฉูู Next Chapter ุฏุฑ ุตูุญู ุขุฎุฑ

#### **C. Standard View (ููุง ูุฏู)**
- ููุงุด ุณุงุฏู

### 3. **ุฑูุฎูุงู (TTS - Text to Speech)**
- โ ูุงุจูุช ุฑูุฎูุงู ุชฺฉ ุขู
- โ ูุงุจูุช ุฑูุฎูุงู ฺฉู ูุตู
- โ ุฏฺฉููโูุง Play, Pause, Stop
- โ ูพุดุชุจุงู ุงุฒ ูุงุฑุณ ู ุงูฺฏูุณ
- โ๏ธ **ูุดฺฉู**: ููุงููฺฏ ุจุง ุฒุจุงู ุณุงุช ูุงูุต ุงุณุช

### 4. **ูพูุฑ ุตูุช**
- โ BibleAudioPlayer component ููุฌูุฏ ุงุณุช
- โ ูุงุจูุช ูพุฎุด ุตูุช ูุตูโูุง
- โ๏ธ **ูุดฺฉู**: ูุงูโูุง ุตูุช ุจุงุฏ ุงุถุงูู ุดููุฏ

### 5. **ุฌุณุชุฌู**
- โ ุฌุนุจู ุฌุณุชุฌู ููุฌูุฏ
- โ๏ธ ุนููฺฉุฑุฏ ฺฉุงูู ูุณุช

---

## โ ุงูฺฉุงูุงุช ูุงูุต ุง ูุดฺฉูโุฏุงุฑ

### 1. **ููุงููฺฏ ุฒุจุงู ุจุง ุณุงุช** โ๏ธ
**ูุดฺฉู ูุนู:**
- ููุช ุฒุจุงู ุณุงุช ูุงุฑุณ ุงุณุชุ ฺฉุชุงุจ ููุท ูุงุฑุณ ููุงุด ูโุฏูุฏ
- ุฏุฑ ุญุงูุช bilingualุ ูุฑ ุฏู ุฒุจุงู ฺฉูุงุฑ ูู ูุณุชูุฏ ุงูุง RTL/LTR ุฏุฑุณุช ูุณุช

**ูุงุฒ:**
```
ุงฺฏุฑ ุฒุจุงู ุณุงุช = ูุงุฑุณ:
  - ุตูุญู ุฑุงุณุช (ุงุตู) = ูุงุฑุณ
  - ุตูุญู ฺูพ (ููุงุจู) = ุงูฺฏูุณ
  - ุฌูุช ูุฑู ุฒุฏู = ุฑุงุณุช ุจู ฺูพ (RTL)

ุงฺฏุฑ ุฒุจุงู ุณุงุช = ุงูฺฏูุณ:
  - ุตูุญู ุฑุงุณุช (ุงุตู) = ุงูฺฏูุณ  
  - ุตูุญู ฺูพ (ููุงุจู) = ูุงุฑุณ
  - ุฌูุช ูุฑู ุฒุฏู = ฺูพ ุจู ุฑุงุณุช (LTR)
```

### 2. **Header ฺฉุชุงุจ** โ๏ธ
**ูุดฺฉู ูุนู:**
- ูุงู ฺฉุชุงุจ ู ุนูุฏ ุฏุฑ header ูุฌูุฏ ุฏุงุฑุฏ
- ุงูุง ุจูโุฑูุฒุฑุณุงู ฺฉุงูู ูุณุช

**ูุงุฒ:**
```
Header ุจุงุฏ ููุงุด ุฏูุฏ:
- ูุงู ุนูุฏ: "ุนูุฏ ุนุชู" ุง "ุนูุฏ ุฌุฏุฏ"
- ูุงู ฺฉุชุงุจ: "ูพุฏุงุด" / "Genesis"
- ุดูุงุฑู ูุตู: "ูุตู 1" / "Chapter 1"
```

### 3. **ุดูุงุฑู ุขุงุช ู ูุตูโูุง** โ๏ธ
**ูุถุนุช ูุนู:**
- ุดูุงุฑู ุขุงุช ุฏุฑ FlipBook ุฎู ุจุฒุฑฺฏ ุงุณุช (44px)
- ูุฑูุช ูุดุงุจู ฺฉุชุงุจ ููุฏุณ ุงุตู ูุณุช

**ูุงุฒ:**
```
ูุฑูุช ุงุณุชุงูุฏุงุฑุฏ ฺฉุชุงุจ ููุฏุณ:
  "ยนุฏุฑ ุงุจุชุฏุง ุฎุฏุง ุขุณูุงูโูุง ู ุฒูู ุฑุง ุขูุฑุฏ."
  "ยฒู ุฒูู..."
  
ุดูุงุฑู ูุตู ุฏุฑ ุจุงูุง ุตูุญู:
  "ูุตู ฑ" ุจุง ูููุช ุจุฒุฑฺฏุชุฑ ู bold
```

### 4. **ููุงููฺฏ ุฑูุฎูุงู ุจุง ุฒุจุงู ุณุงุช** โ
**ูุดฺฉู:**
- ุฑูุฎูุงู ููุดู ุจู ฺฉ ุฒุจุงู ุงุณุช
- ุชุบุฑ ุจุง ุฒุจุงู ุณุงุช sync ููโุดูุฏ

**ูุงุฒ:**
```javascript
if (siteLanguage === 'fa') {
  // ุฑูุฎูุงู ุจู ูุงุฑุณ ุจุง voice ูุงุฑุณ
  voice = persianVoice;
} else {
  // ุฑูุฎูุงู ุจู ุงูฺฏูุณ ุจุง voice ุงูฺฏูุณ
  voice = englishVoice;
}
```

### 5. **Highlight ฺฉููู ุฏุฑ ุญุงู ุฎูุงูุฏู ุดุฏู** โ๏ธ
**ูุถุนุช:**
- ฺฉุฏ ููุฌูุฏ ุงุณุช (currentReadingWord state)
- ุงูุง ุจูโุทูุฑ ฺฉุงูู ูพุงุฏูโุณุงุฒ ูุดุฏู

**ูุงุฒ:**
```css
.current-word {
  background: yellow;
  font-weight: bold;
  color: #000;
  padding: 2px 4px;
  border-radius: 3px;
  animation: pulse 0.5s;
}
```

### 6. **ุชูุณุฑ ูฺุฏู** โ (ูุฌูุฏ ูุฏุงุฑุฏ)
**ูุงุฒ:**
- ฺฉ ฺฉุชุงุจ ุฌุฏุงฺฏุงูู ุจู ูุงู "ุชูุณุฑ ูฺุฏู"
- ุจุงุฏ ุจู ุฏุชุงุจุณ ุงุถุงูู ุดูุฏ
- ฺฉ tab ุง section ุฌุฏุฏ ุฏุฑ BibleReader

**ูพุดููุงุฏ ุณุงุฎุชุงุฑ:**
```typescript
interface CommentaryBook {
  id: string;
  type: 'mojdeh-tafsir';
  name: { fa: 'ุชูุณุฑ ูฺุฏู', en: 'Mojdeh Commentary' };
  chapters: Chapter[];
}
```

### 7. **ุฒูู ฺฉุชุงุจ** โ๏ธ
**ูุถุนุช ูุนู:**
- FlipBook ุงูุฏุงุฒู ุซุงุจุช ุฏุงุฑุฏ: 1100ร750px
- ูุงุจูุช zoom ูุฌูุฏ ูุฏุงุฑุฏ

**ูุงุฒ:**
```javascript
// Zoom levels: 75%, 100%, 125%, 150%
const zoomLevels = [0.75, 1, 1.25, 1.5];
// ุญูุธ aspect ratio ู ุงุณุชุงู
```

---

## ๐ง ูุงุฒูุง ุงุตู ุจุฑุง ุชฺฉูู

### ุงูููุช 1: ููุงููฺฏ ุฒุจุงู **[CRITICAL]**
```typescript
// Logic ููุฑุฏ ูุงุฒ:
const primaryLang = lang; // ุฒุจุงู ุงุตู ุณุงุช
const secondaryLang = lang === 'fa' ? 'en' : 'fa'; // ุฒุจุงู ููุงุจู

// ุฏุฑ FlipBook:
if (lang === 'fa') {
  rightPage = verses.fa; // ุตูุญู ุฑุงุณุช ูุงุฑุณ
  leftPage = verses.en;  // ุตูุญู ฺูพ ุงูฺฏูุณ
  direction = 'rtl';
} else {
  rightPage = verses.en; // ุตูุญู ุฑุงุณุช ุงูฺฏูุณ
  leftPage = verses.fa;  // ุตูุญู ฺูพ ูุงุฑุณ
  direction = 'ltr';
}
```

### ุงูููุช 2: ุฑูุฎูุงู ููุดููุฏ **[HIGH]**
```typescript
const getBestVoice = (language: 'fa' | 'en') => {
  const voices = speechSynthesis.getVoices();
  
  if (language === 'fa') {
    // Persian voices: Google ูุงุฑุณ, Microsoft Sara
    return voices.find(v => 
      v.lang.includes('fa') || 
      v.name.includes('Persian') ||
      v.name.includes('Farsi')
    );
  } else {
    // English voices: Google US, Microsoft David
    return voices.find(v => 
      v.lang === 'en-US' && 
      v.name.includes('Google')
    );
  }
};
```

### ุงูููุช 3: Highlight ฺฉููู ูุนุงู **[MEDIUM]**
```typescript
interface ReadingProgress {
  verseNumber: number;
  wordIndex: number;
  totalWords: number;
}

const highlightCurrentWord = (progress: ReadingProgress) => {
  // ูพุฏุง ฺฉุฑุฏู span ูุฑุจูุท ุจู ฺฉููู
  const wordSpan = document.querySelector(
    `[data-verse="${progress.verseNumber}"] [data-word="${progress.wordIndex}"]`
  );
  
  // ุงุถุงูู ฺฉุฑุฏู class
  wordSpan?.classList.add('reading-now');
};
```

### ุงูููุช 4: ุชูุณุฑ ูฺุฏู **[MEDIUM]**
1. **ุงุถุงูู ฺฉุฑุฏู ุจู ุฏุชุงุจุณ:**
```sql
CREATE TABLE mojdeh_commentary (
  id SERIAL PRIMARY KEY,
  book_key VARCHAR(50),
  chapter INT,
  verse INT,
  commentary_fa TEXT,
  commentary_en TEXT
);
```

2. **Component ุฌุฏุฏ:**
```tsx
<TabView>
  <Tab label="ฺฉุชุงุจ ููุฏุณ">
    <FlipBookBibleReader />
  </Tab>
  <Tab label="ุชูุณุฑ ูฺุฏู">
    <MojdehCommentaryReader />
  </Tab>
</TabView>
```

### ุงูููุช 5: Zoom ฺฉุชุงุจ **[LOW]**
```typescript
const [zoomLevel, setZoomLevel] = useState(1);

<div 
  className="flipbook-wrapper" 
  style={{
    transform: `scale(${zoomLevel})`,
    transformOrigin: 'center top',
    transition: 'transform 0.3s'
  }}
>
  <FlipBook ... />
</div>

// Zoom Controls:
<button onClick={() => setZoomLevel(z => Math.min(z + 0.25, 1.5))}>+</button>
<button onClick={() => setZoomLevel(z => Math.max(z - 0.25, 0.75))}>-</button>
```

---

## ๐ ูุถุนุช ูุนู (Summary)

| ุงูฺฉุงูุงุช | ูุถุนุช | ุฏุฑุตุฏ ุชฺฉูู |
|---------|-------|------------|
| ุณุงุฎุชุงุฑ ุนูุฏ ูุฏู/ุฌุฏุฏ | โ ฺฉุงูู | 100% |
| ุฏูุฒุจุงูู ุจูุฏู ุฏุชุง | โ ฺฉุงูู | 100% |
| FlipBook 3D | โ ฺฉุงูู | 95% |
| ููุงููฺฏ ุจุง ุฒุจุงู ุณุงุช | โ๏ธ ูุงูุต | 40% |
| Header ุจุง ูุงู ุนูุฏ/ฺฉุชุงุจ | โ๏ธ ูุงูุต | 70% |
| ูุฑูุช ุดูุงุฑู ุขุงุช | โ๏ธ ูุงุฒ ุจู ุจูุจูุฏ | 60% |
| ุฑูุฎูุงู ููุดููุฏ | โ๏ธ ูุงูุต | 50% |
| Highlight ฺฉููู ูุนุงู | โ๏ธ ูุงูุต | 30% |
| ุชูุณุฑ ูฺุฏู | โ ูุฌูุฏ ูุฏุงุฑุฏ | 0% |
| ุฒูู ฺฉุชุงุจ | โ ูุฌูุฏ ูุฏุงุฑุฏ | 0% |

**ูุงูฺฏู ฺฉู: 64.5%**

---

## ๐ฏ ูพูุงู ุงุฌุฑุง (Action Plan)

### ูุงุฒ 1: ุฑูุน ูุดฺฉูุงุช ุญุงุช (1-2 ุณุงุนุช)
1. โ ููุงููฺฏ ุฒุจุงู ุจุง ุณุงุช
2. โ ุฑูุฎูุงู ุจุง ุฒุจุงู ุตุญุญ
3. โ ุจูุจูุฏ Header

### ูุงุฒ 2: ุจูุจูุฏูุง UX (2-3 ุณุงุนุช)
4. โ Highlight ฺฉููู ุฏุฑ ุญุงู ุฎูุงูุฏู ุดุฏู
5. โ ูุฑูุช ุจูุชุฑ ุดูุงุฑู ุขุงุช
6. โ Zoom ฺฉุชุงุจ

### ูุงุฒ 3: ูุญุชูุง ุฌุฏุฏ (3-4 ุณุงุนุช)
7. โ ุงุถุงูู ฺฉุฑุฏู ุชูุณุฑ ูฺุฏู ุจู ุฏุชุงุจุณ
8. โ ุณุงุฎุช MojdehCommentaryReader
9. โ ฺฉูพุงุฑฺูโุณุงุฒ ุฏุฑ BibleReaderPage

---

## ๐ ูุงูโูุง ฺฉูุฏ

```
components/
โโโ FlipBookBibleReader.tsx      [799 lines] - ุงุตูโุชุฑู component
โโโ FlipBookBibleReader.css      [1110 lines] - ุงุณุชุงูโูุง
โโโ BibleAudioPlayer.tsx         - ูพูุฑ ุตูุช
โโโ ModernBibleReader.tsx        - ููุง ุงุณุชุงูุฏุงุฑุฏ
โโโ BibleReader.tsx              - ููุง ูุฏู

pages/
โโโ BibleReaderPage.tsx          - ุตูุญู ุงุตู ุจุง toggle views

hooks/
โโโ useBibleTTS.ts               - ููฺฉ ุฑูุฎูุงู
โโโ useLanguage.ts               - ููฺฉ ุฒุจุงู

backend/routes/
โโโ bibleRoutes.js               - API ฺฉุชุงุจ ููุฏุณ
```

---

## ๐ ูฺฉุงุช ูู ููู

### 1. ุณุงุฎุชุงุฑ ุฏุชุงุจุณ ูุนู
```sql
-- ุฌุฏุงูู ููุฌูุฏ:
bible_books (66 ฺฉุชุงุจ)
  - key: ฺฉูุฏ ฺฉุชุงุจ (Gen, Exod, Matt, ...)
  - name_fa, name_en
  - testament: 'old' | 'new'
  - chapters: ุชุนุฏุงุฏ ูุตูโูุง

bible_verses (31,102 ุขู)
  - book_key
  - chapter_number
  - verse_number
  - text_fa
  - text_en
```

### 2. API ูุง ููุฌูุฏ
```
GET /api/bible/books           - ูุณุช ฺฉุชุงุจโูุง
GET /api/bible/content/:book/:chapter  - ุขุงุช ฺฉ ูุตู
GET /api/bible/search?q=...    - ุฌุณุชุฌู
```

### 3. State Management
```typescript
// States ุงุตู ุฏุฑ FlipBookBibleReader:
- selectedBookKey: string
- selectedChapter: number
- verses: BibleVerse[]
- isBilingualMode: boolean
- readingLang: 'fa' | 'en'
- currentPage: number
```

---

**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู**: 12 ุงฺฉุชุจุฑ 2025
**ููุณูุฏู**: GitHub Copilot
**ูุถุนุช**: ุฏุฑ ุญุงู ุชูุณุนู ๐ง
